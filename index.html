<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ping Pong Game</title>
  <style>
    body {
      margin: 0;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      background-color: #E9EFF9;
      font-family: Arial, sans-serif;
    }
    canvas {
      background-color: #ffffff;
    }
    .scoreboard {
      position: absolute;
      top: 20px;
      font-size: 24px;
      color: #333;
    }
    .gameover {
      position: absolute;
      font-size: 36px;
      color: #EA4335;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      display: none;
    }
  </style>
</head>
<body>
  <div class="scoreboard">
    <span id="leftScore">0</span> - <span id="rightScore">0</span>
  </div>
  <div class="gameover" id="gameOver">Game Over!</div>
  <canvas id="gameCanvas"></canvas>

  <script>
    const canvas = document.getElementById("gameCanvas");
    const ctx = canvas.getContext("2d");

    // Function to resize the canvas and adjust game elements
    function resizeCanvas() {
      canvas.width = window.innerWidth * 0.8; // 80% of the window width
      canvas.height = window.innerHeight * 0.6; // 60% of the window height
      resetBall();
    }

    // Resize the canvas when the window is resized
    window.addEventListener("resize", resizeCanvas);
    resizeCanvas();  // Initial resize to set canvas size

    // Game variables
    let ballRadius = canvas.width / 60;
    let ballX = canvas.width / 2;
    let ballY = canvas.height / 2;
    let ballDX = 2;
    let ballDY = -2;

    const paddleHeight = canvas.height / 4;
    const paddleWidth = canvas.width / 60;
    let leftPaddleY = (canvas.height - paddleHeight) / 2;
    let rightPaddleY = (canvas.height - paddleHeight) / 2;

    const leftPaddle = {x: 0, y: leftPaddleY};
    const rightPaddle = {x: canvas.width - paddleWidth, y: rightPaddleY};

    let leftScore = 0;
    let rightScore = 0;
    const winningScore = 5;

    const gameOverElement = document.getElementById("gameOver");

    // Handle mouse movements for Player 2 (right paddle)
    canvas.addEventListener("mousemove", (event) => {
      const mouseY = event.clientY - canvas.offsetTop;
      rightPaddle.y = mouseY - paddleHeight / 2;
    });

    // AI for Player 1 (left paddle) - moves towards the ball
    function moveLeftPaddle() {
      if (ballY < leftPaddle.y + paddleHeight / 2) {
        leftPaddle.y -= 3;
      } else if (ballY > leftPaddle.y + paddleHeight / 2) {
        leftPaddle.y += 3;
      }
    }

    // Draw the paddles, ball, and update scores
    function draw() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);

      // Draw the left paddle (blue)
      ctx.fillStyle = "#4285F4";
      ctx.fillRect(leftPaddle.x, leftPaddle.y, paddleWidth, paddleHeight);

      // Draw the right paddle (red)
      ctx.fillStyle = "#EA4335";
      ctx.fillRect(rightPaddle.x, rightPaddle.y, paddleWidth, paddleHeight);

      // Draw the ball (green)
      ctx.fillStyle = "#34A853";
      ctx.beginPath();
      ctx.arc(ballX, ballY, ballRadius, 0, Math.PI * 2);
      ctx.fill();
      ctx.closePath();

      // Update score
      document.getElementById("leftScore").textContent = leftScore;
      document.getElementById("rightScore").textContent = rightScore;

      // Ball movement
      ballX += ballDX;
      ballY += ballDY;

      // Ball collision with top and bottom walls
      if (ballY + ballDY < ballRadius || ballY + ballDY > canvas.height - ballRadius) {
        ballDY = -ballDY;
      }

      // Ball collision with paddles
      if (ballX + ballDX < ballRadius + paddleWidth && ballY > leftPaddle.y && ballY < leftPaddle.y + paddleHeight) {
        ballDX = -ballDX;
        leftScore++;
        increaseBallSpeed();
      } else if (ballX + ballDX > canvas.width - ballRadius - paddleWidth && ballY > rightPaddle.y && ballY < rightPaddle.y + paddleHeight) {
        ballDX = -ballDX;
        rightScore++;
        increaseBallSpeed();
      }

      // Check for scoring and reset ball position if necessary
      if (ballX + ballDX < ballRadius || ballX + ballDX > canvas.width - ballRadius) {
        if (leftScore >= winningScore || rightScore >= winningScore) {
          gameOver();
        } else {
          resetBall();
        }
      }

      moveLeftPaddle();
      requestAnimationFrame(draw);
    }

    // Increase ball speed after each paddle hit
    function increaseBallSpeed() {
      if (Math.abs(ballDX) < 10) {
        ballDX += ballDX > 0 ? 0.5 : -0.5;
        ballDY += ballDY > 0 ? 0.5 : -0.5;
      }
    }

    // Reset the ball to the center after a score
    function resetBall() {
      ballX = canvas.width / 2;
      ballY = canvas.height / 2;
      ballDX = 2;
      ballDY = -2;
    }

    // Handle game over
    function gameOver() {
      gameOverElement.style.display = "block";
      setTimeout(() => {
        resetBall();
        leftScore = 0;
        rightScore = 0;
        gameOverElement.style.display = "none";
      }, 3000);  // Wait for 3 seconds before restarting the game
    }

    // Start the game
    draw();
  </script>
</body>
</html>
